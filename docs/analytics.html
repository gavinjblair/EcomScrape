<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EcomScrape | Analytics</title>
  <meta name="description" content="Analytics dashboard with category performance, pricing trends, and rating insights.">
  <meta property="og:title" content="EcomScrape - Analytics Dashboard">
  <meta property="og:description" content="Visualise product data with interactive charts and AI-powered insights.">
  <meta property="og:type" content="website">
  <link rel="stylesheet" href="assets/tailwind.css">
  <link rel="stylesheet" href="assets/custom.css">
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.2"></script>
</head>
<body class="min-h-screen text-white relative overflow-x-hidden bg-[radial-gradient(circle_at_top,_#1a1f3a_0,_#060912_60%)]">
  <div class="pointer-events-none absolute -top-24 -left-24 w-96 h-96 rounded-full bg-primary/30 blur-3xl"></div>
  <div class="pointer-events-none absolute bottom-0 right-0 w-[28rem] h-[28rem] rounded-full bg-accentTo/20 blur-3xl"></div>
  <div class="flex min-h-screen relative z-10">
    <aside class="relative flex flex-col h-screen w-56 bg-white/10 backdrop-blur-xl border-r border-white/10 shadow-[0_0_25px_rgba(0,0,0,0.4)] p-5 gap-4 sticky top-0 overflow-hidden">
      <div class="absolute left-0 top-0 h-full w-[1px] bg-white/10"></div>
      <div class="flex items-center gap-3 text-xl font-bold">EcomScrape</div>
      <nav class="flex flex-col gap-2 text-sm">
        <a class="relative flex items-center gap-3 px-4 py-2 rounded-xl text-white/75 hover:bg-white/10 hover:text-white transition" href="index.html">Home</a>
        <a class="relative flex items-center gap-3 px-4 py-2 rounded-xl text-white/75 hover:bg-white/10 hover:text-white transition" href="products.html">Products</a>
        <a class="relative flex items-center gap-3 px-4 py-2 rounded-xl bg-primary/40 text-white shadow-[0_0_20px_rgba(58,123,255,0.45)] before:absolute before:inset-0 before:rounded-xl before:bg-primary/20 before:blur-xl before:-z-10" href="analytics.html">Analytics</a>
      </nav>
      <div class="mt-auto flex flex-col gap-3"></div>
    </aside>

    <main class="flex-1 p-6 lg:p-10 overflow-y-auto">
      <div class="max-w-7xl mx-auto px-6 pt-10 pb-24 space-y-10">
        <div class="flex flex-wrap items-start justify-between gap-4">
          <div>
            <h1 class="text-4xl font-bold tracking-tight mb-1">Analytics Dashboard</h1>
            <p id="filterSummary" class="text-sm text-white/75 mb-6">Filters: none</p>
          </div>
          <div class="mt-1">
            <button class="inline-flex items-center px-4 py-2 rounded-full border border-white/30 bg-white/5 text-white hover:bg-white/10 transition focus:outline-none focus:ring-2 focus:ring-primary/60" id="clearFilters">Clear filters</button>
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
          <div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-xl p-5 glass-topline hover:shadow-[0_0_20px_rgba(58,123,255,0.45)] transition">
            <div class="text-[0.7rem] uppercase tracking-[0.17em] text-white/60 mb-2">Total products</div>
            <div class="text-3xl font-bold text-white leading-none text-neon" id="kpiCount">-</div>
          </div>
          <div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-xl p-5 glass-topline hover:shadow-[0_0_20px_rgba(58,123,255,0.45)] transition">
            <div class="text-[0.7rem] uppercase tracking-[0.17em] text-white/60 mb-2">Avg price</div>
            <div class="text-3xl font-bold text-white leading-none text-neon" id="kpiAvgPrice">-</div>
          </div>
          <div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-xl p-5 glass-topline hover:shadow-[0_0_20px_rgba(58,123,255,0.45)] transition">
            <div class="text-[0.7rem] uppercase tracking-[0.17em] text-white/60 mb-2">Median price</div>
            <div class="text-3xl font-bold text-white leading-none text-neon" id="kpiMedPrice">-</div>
          </div>
          <div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-xl p-5 glass-topline hover:shadow-[0_0_20px_rgba(58,123,255,0.45)] transition">
            <div class="text-[0.7rem] uppercase tracking-[0.17em] text-white/60 mb-2">Avg rating</div>
            <div class="text-3xl font-bold text-white leading-none text-neon" id="kpiAvgRating">-</div>
          </div>
          <div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-xl p-5 glass-topline hover:shadow-[0_0_20px_rgba(58,123,255,0.45)] transition">
            <div class="text-[0.7rem] uppercase tracking-[0.17em] text-white/60 mb-2">Categories</div>
            <div class="text-3xl font-bold text-white leading-none text-neon" id="kpiCats">-</div>
          </div>
        </div>
        <p id="generatedAt" class="text-textSecondary text-sm"></p>

        <div class="mt-6 grid gap-6 xl:grid-cols-3" style="height: 58vh;">
          <section class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-xl shadow-black/40 p-5 glass-topline xl:col-span-3 flex flex-col overflow-hidden" style="height: 100%;">
            <div class="flex flex-wrap items-center justify-between gap-3">
              <h3 class="text-sm font-semibold text-white/80 flex items-center gap-2">Category performance</h3>
              <div class="flex items-center gap-2 text-xs">
                <button id="metricCountBtn" class="inline-flex items-center px-3 py-1.5 rounded-full border border-white/30 bg-white/5 text-white text-xs hover:bg-white/10 transition">By count</button>
                <button id="metricPriceBtn" class="inline-flex items-center px-3 py-1.5 rounded-full border border-white/30 bg-white/5 text-white/75 text-xs hover:bg-white/10 transition">By avg price</button>
              </div>
            </div>
            <div class="mt-4 flex-1 min-h-0 overflow-y-auto pr-1 space-y-3">
              <div class="grid gap-6 lg:grid-cols-2 min-h-0">
                <div>
                  <div class="relative w-full overflow-visible" style="height: 16rem;">
                    <div id="categorySunburstChart" class="h-full w-full"></div>
                  </div>
                  <div id="sunburstHoverDetail" class="mt-2 text-xs text-white/60"></div>
                </div>
                <div class="space-y-2">
                  <div id="categoryKpis" class="grid gap-2 md:grid-cols-2"></div>
                  <div>
                    <div class="text-xs uppercase tracking-wide text-white/60 mb-2">Top categories</div>
                    <div id="topCategoriesList" class="space-y-2"></div>
                    <button id="toggleLegendInline" class="mt-2 text-xs text-white/75 underline hover:text-primary transition">View all categories</button>
                  </div>
                  <div id="categoryOtherNote" class="text-xs text-white/60"></div>
                </div>
              </div>
              <div class="flex items-center justify-between text-xs text-white/75">
                <button id="toggleLegend" class="text-white hover:text-primary transition underline decoration-primary/60">Show full legend</button>
                <span id="legendSummary" class="text-white/60"></span>
              </div>
              <div id="sunburstLegend" class="legend-compact"></div>
            </div>
          </section>
          <section class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-xl shadow-black/40 p-5 glass-topline flex flex-col overflow-hidden" style="height: 100%;">
            <h3 class="text-sm font-semibold text-white/80 mb-2 flex items-center gap-2">Average price per category</h3>
            <div class="relative mt-2 w-full" style="flex: 1; min-height: 0; overflow-y: auto;">
              <div id="avgPriceAreaChart" class="h-full w-full"></div>
            </div>
          </section>
          <section class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-xl shadow-black/40 p-5 glass-topline xl:col-span-2 flex flex-col overflow-hidden" style="height: 100%;">
            <h3 class="text-sm font-semibold text-white/80 mb-2 flex items-center gap-2">Rating distribution</h3>
            <div class="relative mt-2 w-full overflow-hidden" style="flex: 1; min-height: 0;">
              <div id="ratingDistChart" class="h-full w-full"></div>
            </div>
          </section>
        </div>
        <section class="mt-6 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-xl shadow-black/40 p-5 glass-topline">
          <h3 class="text-sm font-semibold text-white/80 mb-2 flex items-center gap-2">Price distribution</h3>
          <div class="relative mt-2 h-96 w-full overflow-hidden">
            <div id="priceDistChart" class="h-full w-full"></div>
          </div>
        </section>

        <section class="mt-12">
          <h2 class="text-2xl font-semibold mb-2">AI-powered insights</h2>
          <p class="text-sm text-white/75 mb-5">Highlights derived from the current filtered dataset. These update whenever filters change.</p>
          <div id="insightsGrid" class="grid gap-4 md:grid-cols-2 xl:grid-cols-3"></div>
        </section>
      </div>
    </main>
  </div>

  <script type="module" src="assets/js/analytics.js"></script>
</body>
</html>
